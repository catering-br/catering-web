<%= render 'header' %>
<section id="menus">
  <div class="container">
    <!-- Nav tabs -->
    <ul class="nav nav-pills center-block">
      <li class="active">
        <a href="#products-pills" data-toggle="tab" aria-expanded="true">Serviços</a>
      </li>
      <li class="">
        <a href="#orders-pills" data-toggle="tab" aria-expanded="false">Pedidos</a>
      </li>
    </ul>
    <!-- Tab panes-->
    <div class="tab-content panel-body">
      <!-- product panel end-->
      <div class="tab-pane fade active in" id="products-pills">
        <% if notice %>
            <div id="notice" class="alert alert-success"><%= notice %></div>
        <% end %>
        <div class="row">
          <div class="panel-body">
            <div id="dataTables-example_filter" class="dataTables_filter" style="text-align: center">
              <input type="search" class="form-control"
                     placeholder="Digite aqui o prato, restaurante ou tipo de cozinha preferido"
                     aria-controls="dataTables-example">
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-8">
            <% @products.each do |product| %>
                <!-- List of products -->
                <div class="panel-body">
                  <ul class="list-unstyled">
                    <li class="left clearfix">
                      <div class="col-lg-3">
                        <div class="fa-stack fa-4x">
                          <% picture = Picture.where(product_id: product.id).take %>
                          <% if picture != nil %>
                              <%= image_tag picture.image.url(:thumb) %>
                          <% else %>
                              <i class="fa fa-circle fa-stack-2x text-primary"></i>
                              <i class="fa fa-file-image-o fa-stack-1x fa-inverse"></i>
                          <% end %>
                        </div>
                      </div>
                      <div class="col-lg-9 ">
                        <div class="row">

                          <strong class="text-primary"><%= product.name %></strong>
                          <div class="pull-right">
                            <strong class="text-primary">R$ <%= product.price %></strong>
                            <%= link_to product, class:"btn btn-primary btn-circle" do%>
                                <i class="fa fa-bars"></i>
                            <% end %>
                            <% if client_signed_in? %>
                                <%= link_to buy_shopping_cart_path(@current_cart, :product => product), class:"btn btn-primary btn-circle" do%>
                                    <i class="fa fa-plus"></i>
                                <% end %>
                            <% else %>
                                <%= link_to new_client_registration_path , class:"btn btn-primary btn-circle" do%>
                                    <i class="fa fa-plus"></i>
                                <% end%>
                            <% end %>
                          </div>

                        </div>
                        <!-- category-->
                        <div class="row">
                          <i class="fa fa-star">&nbsp</i><%= product.rating %>
                          <span>,</span>
                          <i class="fa fa-cutlery">&nbsp </i><%= product.category_product.name %>
                          <span>,</span>
                          <i class="fa fa-tag">&nbsp</i><%= product.professional.client.name %>
                        </div>
                        <!-- end category-->
                        <!-- description of product -->
                        <div class="row">
                          <p><%= product.description %></p>
                        </div>
                        <!--end product description-->
                      </div>
                    </li>

                  </ul>
                </div>
            <% end %>
          </div>

          <!--list of products end -->
          <!-- carrinho de compras -->
          <div class="col-lg-4">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <h2 class="text-center" style="font-size: 28px;"><i class="fa fa-shopping-cart"></i> Meu pedido</h2>
              </div>
              <div class="panel-body text-center">
                <h2>Carinho vazio</h2>
                <h3>Faça seu pedido!</h3>
              </div>
              <div class="panel-footer">
                .......
              </div>
            </div>
          </div>
          <!-- fim do carinho -->
        </div>

        <br>
        <%= link_to 'New Product', new_product_path, class:"btn btn-lg btn-primary" %>
      </div>
      <!-- Products panel end-->
      <!-- Orders panel -->
      <div class="tab-pane fade text-center" id="orders-pills">
        <h2>Ops! Você não está logado!</h2>
        <h3>Faça login para visualizar seus pedidos</h3>
      </div>
      <!-- orders panel end-->
    </div>
  </div>
</section>

<!-- Services Section -->
<section id="products">
  <div class="container">
    <% if notice %>
        <div id="notice" class="alert alert-success"><%= notice %></div>
    <% end %>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h2>Comprar...</h2>
      </div>
      <div class="panel-body">
        <div id="dataTables-example_wrapper" class="form-inline ">
          <div class="row">
            <div class="col-sm-6">
              <div class="dataTables_length" id="dataTables-example_length">
                <label>Show
                  <select name="dataTables-example_length" aria-controls="dataTables-example" class="form-control">
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                  </select> entries</label>
              </div>
            </div>
            <div class="col-sm-6 ">
              <div id="dataTables-example_filter" class="dataTables_filter" style="text-align: right;">
                <label>Search:
                  <input type="search" class="form-control "
                         placeholder="Digite aqui o prato, restaurante ou tipo de cozinha preferido"
                         aria-controls="dataTables-example">
                </label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12">
              <div class="table-responsive">
                <table class="table table-bordered" id="products-list" role="grid">
                  <thead>
                  <tr role="row">
                    <th tabindex="0" rowspan="1" aria-sort="ascending"
                        aria-label="Rendering engine: activate to sort column descending">Professional
                    </th>
                    <th>Thumbnail</th>
                    <th>Categoria</th>
                    <th>Nome</th>
                    <th>Description</th>
                    <th>Price</th>
                    <th>Quantidade máxima</th>
                    <th>Rating</th>
                    <th colspan="3"></th>
                  </tr>
                  </thead>

                  <tbody>
                  <% @products.each do |product| %>
                      <tr>
                        <td><%= product.professional.client.name %></td>
                        <% picture = Picture.where(product_id: product.id).take %>
                        <% if picture != nil %>
                            <td><%= image_tag picture.image.url(:thumb) %></td>
                        <% else %>
                            <td></td>
                        <% end %>
                        <td><%= product.category_product.name %></td>
                        <td><%= product.name %></td>
                        <td><%= product.description %></td>
                        <td><%= product.price %></td>
                        <td><%= product.rating %></td>
                        <td><%= link_to 'Show', product %></td>
                        <% if @current_professional != nil && @current_professional.id == product.professional_id %>
                            <td><%= link_to 'Edit', edit_product_path(product) %></td>
                            <td><%= link_to 'Destroy', product, method: :delete, data: {confirm: 'Are you sure?'} %></td>
                        <% end %>
                        <% if client_signed_in? %>
                            <td><%= link_to 'Comprar', buy_shopping_cart_path(@current_cart, :product => product) %></td>
                        <% else %>
                            <td><%= link_to 'Comprar', new_client_registration_path %></td>
                        <% end %>
                      </tr>
                  <% end %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="dataTables_info" id="dataTables-example_info" role="status" aria-live="polite"
                   style="padding-top: 8px; white-space: nowrap;">Showing 1 to 10 of 57 entries
              </div>
            </div>
            <div class="col-sm-6">
              <div class="dataTables_paginate paging_simple_numbers" style="text-align: right;height: 43px;" id="dataTables-example_paginate">
                <ul class="pagination" style="margin: 2px 0; white-space: nowrap;">
                  <li class="paginate_button previous disabled" aria-controls="dataTables-example" tabindex="0" id="dataTables-example_previous">
                    <a href="#">Previous</a></li>
                  <li class="paginate_button active" aria-controls="dataTables-example" tabindex="0"><a href="#">1</a>
                  </li>
                  <li class="paginate_button " aria-controls="dataTables-example" tabindex="0"><a href="#">2</a></li>
                  <li class="paginate_button " aria-controls="dataTables-example" tabindex="0"><a href="#">3</a></li>
                  <li class="paginate_button " aria-controls="dataTables-example" tabindex="0"><a href="#">4</a></li>
                  <li class="paginate_button " aria-controls="dataTables-example" tabindex="0"><a href="#">5</a></li>
                  <li class="paginate_button " aria-controls="dataTables-example" tabindex="0"><a href="#">6</a></li>
                  <li class="paginate_button next" aria-controls="dataTables-example" tabindex="0" id="dataTables-example_next">
                    <a href="#">Next</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br>
    <%= render 'footer', step: @step, current_cart: @current_cart %>

  </div>
</section>


